---
# Trigger gravity update via /api/action/gravity (POST)
- name: Trigger gravity update
  ansible.builtin.uri:
    url: "{{ pihole.api_url }}/api/action/gravity"
    method: POST
    headers:
      X-FTL-SID: "{{ pihole_session_id }}"
    status_code: [200]
    validate_certs: "{{ pihole.validate_certs | default(false) }}"
  register: gravity_update_result

- name: Display gravity update status
  ansible.builtin.debug:
    msg: "Gravity update triggered successfully"
  when: gravity_update_result.status == 200
