# Redis Configuration File
# Generated by Ansible - DO NOT EDIT MANUALLY
# Generated on: {{ ansible_date_time.iso8601 }}

# Network
bind {{ redis.bind_address | default('127.0.0.1') }}
port {{ redis.port | default(6379) }}
protected-mode yes

# Persistence
appendonly {{ 'yes' if redis.config.appendonly | default(true) else 'no' }}
appendfsync everysec
save 900 1
save 300 10
save 60 10000

# Memory Management
{% if redis.config.maxmemory is defined %}
maxmemory {{ redis.config.maxmemory }}
{% endif %}
{% if redis.config.maxmemory_policy is defined %}
maxmemory-policy {{ redis.config.maxmemory_policy }}
{% endif %}

# Security
aclfile /data/users.acl
# Note: When using ACL, do not use requirepass

# Logging
loglevel notice
logfile ""

# Performance
tcp-backlog 511
timeout 0
tcp-keepalive 300

# Limits
maxclients 10000

# Additional custom configurations
{% if redis.config.extra is defined %}
{% for key, value in redis.config.extra.items() %}
{{ key }} {{ value }}
{% endfor %}
{% endif %}
