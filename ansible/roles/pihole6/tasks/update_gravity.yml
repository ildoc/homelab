---
- name: Trigger gravity update
  ansible.builtin.uri:
    url: "{{ pihole.api_url }}/api/gravity"
    method: POST
    headers:
      X-FTL-SID: "{{ pihole.api_key }}"
      Content-Type: "application/json"
    body_format: json
    body:
      action: "update"
    status_code: [200, 202]
  register: gravity_update_result

- name: Display gravity update status
  ansible.builtin.debug:
    msg: "Gravity update triggered successfully"
  when: gravity_update_result.status in [200, 202]
