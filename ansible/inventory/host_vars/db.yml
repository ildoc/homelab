db:
  postgres:
    admin_user: "{{ _secrets.postgres.admin_user }}"
    admin_password: "{{ _secrets.postgres.admin_password }}"
    pgadmin_email: "{{ _secrets.postgres.pgadmin_email }}"
    pgadmin_password: "{{ _secrets.postgres.pgadmin_password }}"

    databases:
      - name: invidious_db
        owner: invidious_user
        encoding: UTF8
        lc_collate: en_US.UTF-8
        lc_ctype: en_US.UTF-8
        extensions:
          - pg_trgm
          - btree_gin
      
      - name: authentik_db
        owner: authentik_user
        encoding: UTF8
        lc_collate: en_US.UTF-8
        lc_ctype: en_US.UTF-8
      
      - name: matrix_db
        owner: matrix_user
        encoding: UTF8
        lc_collate: C
        lc_ctype: C

      - name: sonarqube_db
        owner: sonarqube_user
        encoding: UTF8
        lc_collate: en_US.UTF-8
        lc_ctype: en_US.UTF-8

      - name: kestra_db
        owner: kestra_user
        encoding: UTF8
        lc_collate: en_US.UTF-8
        lc_ctype: en_US.UTF-8

    users:
      - name: invidious_user
        password: "{{ _secrets.postgres_users.invidious }}"
        databases:
          - invidious_db
        privileges: ALL
        table_privs: ALL
        sequence_privs: ALL
      
      - name: authentik_user
        password: "{{ _secrets.postgres_users.authentik }}"
        databases:
          - authentik_db
        privileges: ALL
        table_privs: ALL
        sequence_privs: ALL

      - name: matrix_user
        password: "{{ _secrets.postgres_users.matrix }}"
        databases:
          - matrix_db
        privileges: ALL
        table_privs: ALL
        sequence_privs: ALL
      
      - name: sonarqube_user
        password: "{{ _secrets.postgres_users.sonarqube }}"
        databases:
          - sonarqube_db
        privileges: ALL
        table_privs: ALL
        sequence_privs: ALL

      - name: kestra_user
        password: "{{ _secrets.postgres_users.kestra }}"
        databases:
          - kestra_db
        privileges: ALL
        table_privs: ALL
        sequence_privs: ALL
