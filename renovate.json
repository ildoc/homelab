{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Configurazione Renovate per aggiornamenti automatici di Docker, Helm, Terraform e altro",
  "extends": [
    "config:recommended",
    ":disableRateLimiting",
    ":dependencyDashboard",
    ":semanticCommits",
    ":timezone(Europe/Rome)",
    "docker:pinDigests"
  ],
  "assignees": ["ildoc"],
  "automerge": false,
  "platformAutomerge": false,
  "prConcurrentLimit": 50,
  "prHourlyLimit": 0,
  "internalChecksFilter": "flexible",
  "ignorePaths": [
    "**/archived/**",
    "docs/**"
  ],
  "kubernetes": {
    "fileMatch": [
      "(^|/)kubernetes/.*\\.ya?ml$",
      "(^|/)(deployment|statefulset|daemonset|job|cronjob)\\.ya?ml$"
    ]
  },
  "packageRules": [
    {
      "description": "Raggruppa tutti gli aggiornamenti digest Docker in una singola PR",
      "matchDatasources": ["docker"],
      "matchUpdateTypes": ["digest"],
      "groupName": "Docker digest pins",
      "groupSlug": "docker-digests"
    },
    {
      "description": "Aggiornamenti non-major Docker - una PR con l'ultima versione disponibile",
      "matchDatasources": ["docker"],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "description": "Aggiornamenti major Docker - una PR separata per immagine",
      "matchDatasources": ["docker"],
      "matchUpdateTypes": ["major"]
    },
    {
      "description": "Aggiornamenti Helm charts",
      "matchDatasources": ["helm"],
      "enabled": true
    },
    {
      "description": "Aggiornamenti GitHub Actions",
      "matchDatasources": ["github-tags"],
      "matchManagers": ["github-actions"],
      "enabled": true,
      "pinDigests": true
    },
    {
      "description": "Aggiornamenti Terraform/OpenTofu",
      "matchDatasources": ["terraform-provider", "terraform-module"],
      "enabled": true,
      "rangeStrategy": "bump"
    },
    {
      "description": "Aggiornamenti Ansible Galaxy",
      "matchDatasources": ["galaxy", "galaxy-collection"],
      "enabled": true
    }
  ]
}
